<% layout('./layouts/boilerplate.ejs') -%>
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-10 col-md-12 shadow-lg rounded-4 p-5 bg-white">
            <form class="row g-4 needs-validation"
                  action="/listings/<%= editListing._id %>?_method=PATCH"
                  method="post"
                  enctype="multipart/form-data"
                  novalidate>
                <!-- Title -->
                <div class="col-12">
                    <label for="inputTitle" class="form-label">Title</label>
                    <input type="text"
                           class="form-control"
                           id="inputTitle"
                           name="listing[title]"
                           placeholder="Title of your property"
                           value="<%= editListing.title %>"
                           required>
                    <div class="valid-feedback">Looks good!</div>
                    <div class="invalid-feedback">Please enter your property title.</div>
                </div>
                <!-- Description -->
                <div class="col-12">
                    <label for="inputDescription" class="form-label">Description</label>
                    <textarea class="form-control"
                              id="inputDescription"
                              name="listing[description]"
                              rows="3"
                              placeholder="Describe your place"
                              required><%= editListing.description %></textarea>
                    <div class="valid-feedback">Looks good!</div>
                    <div class="invalid-feedback">Please provide a short description.</div>
                </div>
                <!-- Image Preview + Upload -->
                <div class="col-12 text-center">
                    <div class="image-preview-container mb-3">
                        <img src="<%= editListing.image.url %>"
                             alt="Bookmynest Image"
                             class="img-thumbnail shadow-sm edit-img">
                    </div>
                    <label for="inputImage" class="form-label fw-semibold"></label>
                    <input type="file"
                           class="form-control"
                           id="inputImage"
                           name="listing[image]">
                </div>
                <!-- Location -->
                <div class="col-md-6">
                    <label for="inputCity" class="form-label">Location</label>
                    <input type="text"
                           class="form-control"
                           id="inputCity"
                           name="listing[location]"
                           placeholder="City"
                           value="<%= editListing.location %>"
                           required>
                    <div class="invalid-feedback">Enter a valid city.</div>
                </div>
                <!-- Country -->
                <div class="col-md-4">
                    <label for="inputCountry" class="form-label">Country</label>
                    <input type="text"
                           class="form-control"
                           id="inputCountry"
                           name="listing[country]"
                           placeholder="Country"
                           value="<%= editListing.country %>"
                           required>
                    <div class="invalid-feedback">Enter a valid country.</div>
                </div>
                <!-- Price -->
                <div class="col-md-2">
                    <label for="inputPrice" class="form-label">Price (INR)</label>
                    <input type="number"
                           min="0"
                           class="form-control"
                           name="listing[price]"
                           id="inputPrice"
                           placeholder="INR"
                           value="<%= editListing.price %>">
                </div>
                <!-- Terms -->
                <div class="col-12">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="gridCheck" required>
                        <label class="form-check-label" for="gridCheck">I accept the terms and conditions.</label>
                    </div>
                </div>
                <!-- Submit -->
                <div class="col-12">
                    <button type="submit"
                            class="btn btn-outline-cornflower w-100 rounded-pill py-2">Update Listing</button>
                </div>
            </form>
        </div>
    </div>
</div>
